# Руководство пользователя PRF Constructor

## Быстрый старт

### Запуск приложения

1. Убедитесь, что установлен Python 3.8 или выше
2. Установите зависимости (опционально, для визуализации):
   ```bash
   pip install -r requirements.txt
   ```
3. Запустите приложение:
   ```bash
   python main.py
   ```
   
## Основные возможности

### 1. Загрузка предопределенных функций

В панели инструментов есть кнопки с примерами функций:
- **add(x,y)** - функция сложения
- **mult(x,y)** - функция умножения  
- **fact(x)** - функция факториала

**Как использовать:**
1. Нажмите на кнопку с нужной функцией (например, "add(x,y)")
2. Функция загрузится в рабочую область
3. В панели "Параметры функции" отобразится информация о функции

### 2. Вычисление функций

**Шаги:**
1. Загрузите функцию (используя кнопки примеров или создайте свою)
2. В панели "Вычисление" в поле "Аргументы" введите значения через запятую
   - Например: `5, 3` для функции с двумя аргументами
   - Например: `5` для функции с одним аргументом
3. Нажмите кнопку "Вычислить" или нажмите Enter
4. Результат отобразится в поле "Результат"

**Примеры:**
- Для `add(x,y)`: введите `5, 3` → получите `8`
- Для `mult(x,y)`: введите `4, 5` → получите `20`
- Для `fact(x)`: введите `5` → получите `120`

### 3. Сохранение функций

**Как сохранить:**
1. Убедитесь, что функция загружена
2. Меню **Файл** → **Сохранить функцию** (или Ctrl+S)
3. В диалоговом окне введите:
   - **Имя функции** (обязательно)
   - **Описание** (опционально)
4. Нажмите "Сохранить"

Функция будет сохранена в локальную базу данных SQLite (`prf_constructor.db`).

### 4. Загрузка сохраненных функций

**Как загрузить:**
1. Меню **Файл** → **Загрузить функцию** (или Ctrl+O)
2. В диалоговом окне выберите функцию из списка
3. Нажмите "Загрузить" или дважды кликните по функции

Функция загрузится в рабочую область и будет готова к использованию.

### 5. Просмотр истории вычислений

В правой панели "История" отображаются все вычисления:
- Имя функции
- Аргументы
- Результат
- Время вычисления

История автоматически обновляется при каждом вычислении.

### 6. Экспорт функций

#### Экспорт в JSON
1. Загрузите функцию
2. Меню **Файл** → **Экспорт в JSON**
3. Выберите место сохранения и имя файла
4. Функция будет сохранена в формате JSON

#### Экспорт в LaTeX
1. Загрузите функцию
2. Меню **Файл** → **Экспорт в LaTeX**
3. Выберите место сохранения и имя файла
4. Функция будет сохранена в формате LaTeX для использования в документах

### 7. Создание новой функции

**Как создать:**
1. Меню **Файл** → **Новая функция** (или Ctrl+N)
2. Рабочая область очистится
3. Используйте кнопки на панели инструментов для добавления базовых функций:
   - **Z(x)** - функция нуля
   - **S(x)** - функция следования
   - **P** - функция проекции
   - **Composition** - оператор композиции
   - **Recursion** - оператор примитивной рекурсии

**Примечание:** Полное визуальное построение функций через drag-and-drop требует дополнительной реализации. Сейчас рекомендуется использовать предопределенные функции или загружать сохраненные.

### 8. Горячие клавиши

- **Ctrl+N** - Новая функция
- **Ctrl+S** - Сохранить функцию
- **Ctrl+O** - Загрузить функцию
- **Ctrl+Q** - Выход
- **F5** - Вычислить функцию
- **F6** - Пошаговое вычисление
- **Enter** - Вычислить (когда курсор в поле аргументов)

## Примеры использования

### Пример 1: Вычисление сложения

1. Нажмите кнопку **add(x,y)** на панели инструментов
2. В поле "Аргументы" введите: `7, 8`
3. Нажмите "Вычислить"
4. Результат: `15`

### Пример 2: Вычисление факториала

1. Нажмите кнопку **fact(x)** на панели инструментов
2. В поле "Аргументы" введите: `6`
3. Нажмите "Вычислить"
4. Результат: `720`

### Пример 3: Сохранение и загрузка

1. Загрузите функцию `add(x,y)`
2. Сохраните её под именем "my_addition" (Ctrl+S)
3. Создайте новую функцию (Ctrl+N)
4. Загрузите сохраненную функцию "my_addition" (Ctrl+O)
5. Вычислите с аргументами `10, 20` → результат `30`

## Структура интерфейса

```
┌─────────────────────────────────────────────────────────┐
│ [Меню] [Панель инструментов: Z() S() P() Ops Примеры]   │
├──────────────────┬──────────────────────────────────────┤
│                  │                                       │
│  Рабочая область │  Параметры функции                    │
│  (канва)         │  - Тип: ...                          │
│                  │  - Арность: ...                      │
│                  │                                       │
│                  │  Вычисление                          │
│                  │  [Аргументы: ] [Вычислить]          │
│                  │  Результат: ...                      │
│                  │                                       │
│                  │  История                             │
│                  │  [Список вычислений]                 │
└──────────────────┴──────────────────────────────────────┘
```

## Решение проблем

### Ошибка "Функция не выбрана"
- Убедитесь, что вы загрузили функцию (используйте кнопки примеров)

### Ошибка "Некорректный формат аргументов"
- Вводите аргументы через запятую: `5, 3`
- Не используйте пробелы внутри чисел
- Убедитесь, что количество аргументов соответствует арности функции

### Ошибка "Превышена максимальная глубина рекурсии"
- Функция слишком сложная или аргументы слишком большие
- Попробуйте уменьшить аргументы
- Можно изменить настройки в меню (если будет реализовано)

### База данных не создается
- Убедитесь, что у приложения есть права на запись в текущей директории
- Файл базы данных `prf_constructor.db` создается автоматически

## Дополнительная информация

### Формат аргументов
- Для функций с одним аргументом: `5`
- Для функций с двумя аргументами: `5, 3`
- Для функций с тремя аргументами: `1, 2, 3`
- И так далее...

### Ограничения
- Аргументы должны быть неотрицательными целыми числами
- Очень большие аргументы (> 10^6) могут привести к медленному вычислению
- Максимальная глубина рекурсии: 1000 (по умолчанию)
- Максимальное количество шагов: 100000 (по умолчанию)

## Справка

Для получения дополнительной информации:
- Меню **Справка** → **Справка** - встроенная справка
- Меню **Справка** → **О программе** - информация о программе

## Техническая поддержка

При возникновении проблем:
1. Проверьте, что все зависимости установлены
2. Убедитесь, что используется Python 3.8+
3. Проверьте логи ошибок в консоли
4. Убедитесь, что база данных не повреждена (можно удалить `prf_constructor.db` для пересоздания)

